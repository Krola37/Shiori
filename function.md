提供されたファイルとこれまでの開発内容に基づき、更新された「Shiori Ultimate Explorer」の機能一覧（Markdown形式）を作成しました。

今回の更新では、**「フォルダの階層（入れ子）管理」**、**「親子セットの並べ替え」**、**「重複作成防止」**、および**「UIの完全日本語化」**といった重要な進展を反映しています。

---

# Shiori Ultimate Explorer 機能仕様書（更新版）

Windowsエクスプローラーの直感的な操作感と、モダンなデザイン、そして強力な一括整理機能を統合したブックマーク管理アプリケーションです。

## 1. フォルダ・ディレクトリ管理（階層構造）

大量のデータを構造化し、直感的に管理するためのコア機能です。

* **多階層サイドバー**: 画面左側にフォルダツリーを常駐表示。`親/子/孫`といった無限の入れ子構造をインデント表示で視覚的に把握可能。
* **フォルダの開閉（折り畳み）**: 親フォルダ横の矢印で子階層の表示・非表示を切り替え、サイドバーの専有面積を最適化。
* **フォルダの並べ替え（親子セット移動）**: 親フォルダをドラッグして移動させると、その配下にある子・孫フォルダも構造を維持したままセットで移動。
* **重複作成の防止**: 同一階層・同一名称のフォルダ作成を制限し、データの混線を防止。
* **右クリック操作**: フォルダを右クリックして「子フォルダの作成」「名前の変更」「削除」が可能。
* **削除ガード**: システムの整合性を守るため、「未分類」フォルダは削除できないよう保護。

## 2. エクスプローラー風 UX (操作性)

Windowsユーザーが習熟なしに操作できるインターフェースを提供します。

* **ドラッグ＆ドロップ移動**: 栞カードをサイドバーの目的のフォルダへドロップするだけで移動が完了。
* **視覚的フィードバック**: ドラッグ中に重なったフォルダがハイライト（強調）され、移動先を明確に提示。
* **完全日本語化UI**: コンテキストメニューやモーダル、ボタン類をすべて日本語で統一。
* **パンくずリスト**: ヘッダーに現在のディレクトリ階層を表示し、上位階層への素早い移動をサポート。

## 3. ブックマーク管理・編集

詳細な情報の保持と、外部ツールからのスムーズな移行をサポートします。

* **詳細編集モーダル**: 右クリックから呼び出し。URL、タイトル、メモ、タグを専用画面で修正。
* **自動メタデータ取得**: `/api/getTitle` と連携。URL保存時にタイトルとOGP画像（サイト画像）を自動取得・反映。
* **ソート機能**: メイン画面の表示を「日付順（新しい順）」または「名前順」で瞬時に切り替え。
* **サジェスト入力（改良版）**: フォルダ入力時に候補をリスト表示。見切れないよう下方向に展開し、選択するまで表示を維持。
* **CSVインポート**: Raindrop.io等の外部サービスから出力したCSVを一括取り込み。

## 4. 一括整理（Bulk Edit）

855件を超える大量のデータを効率的に処理するための専用モードです。

* **複数選択**: モードをONにし、チェックボックスで複数の栞を同時選択。
* **全選択・解除**: 現在のフォルダ内や検索結果の全アイテムをワンクリックで選択。
* **一括移動・削除**: 選択したアイテム群に対し、一括でのフォルダ移動や削除を実行。

---

## 技術スタック

* **Frontend**: Next.js (App Router), Tailwind CSS
* **Storage**: LocalStorage (ブラウザ完結型・オフライン動作)
* **API**: HTMLパースによるタイトル・画像取得ロジック

---

**次のステップへの提案:**
現在の階層構造をさらに活かすために、「フォルダ自体のアーカイブ（一時非表示）機能」や「よく使うフォルダのピン留め機能」などの追加も可能です。必要であればいつでもお知らせください。